<!-- The <div> is so that builder and data entry line up -->
<div class="shapeCanvas">
<!-- Shape canvas is repeated so that svg fills <p> -->
<svg id="canvas" class="shapeCanvas"
  (mousedown)="startDrawingMouse($event)" 
  (mousemove)="keepDrawingMouse($event)"
  (mouseup)="stopDrawingMouse()"
  (touchstart)="startDrawingTouch($event)" 
  (touchmove)="keepDrawingTouch($event)"
  (touchend)="stopDrawingTouch()"  
  >

  <ng-container *ngFor="let shape of shapesToDraw">

    <!--Branch or Bus-->
    <svg *ngIf="shape.elementType=='bus' || shape.elementType=='branch'" >

      <!--Selected-->
      <svg *ngIf="shape==(selectedShape)"   class="selected"
      [attr.height]="shape.hOuter" [attr.width]="shape.wOuter"
      [attr.x]="shape.xOuter" [attr.y]="shape.yOuter"> 
      <rect [attr.stroke-width]="1" 
        [attr.width]="shape.wOuter" [attr.height]="shape.hOuter"/>
      </svg>

      <rect 
        [attr.x]="shape.xInner" 
        [attr.y]="shape.yInner" 
        [attr.width]="shape.wInner"
        [attr.height]="shape.hInner"
        [attr.rx]="shape.elementType=='bus'?8:2" /> 
    </svg>

    <!--Gen or Load-->
    <svg class="path" *ngIf="shape.elementType=='gen' || shape.elementType=='load'">

      <!--Selected-->
      <svg *ngIf="shape==(selectedShape)" class="selected" 
      [attr.height]="shape.hOuter" [attr.width]="shape.wOuter"
      [attr.x]="shape.xOuter" [attr.y]="shape.yOuter"> 
        <rect [attr.width]="shape.wOuter" [attr.height]="shape.hOuter"/>
      </svg>

      <!--Gen-->
      <svg *ngIf="shape.elementType=='gen'"
        [attr.height]="shape.hInner" [attr.width]="shape.wInner"
        [attr.x]="shape.xInner" [attr.y]="shape.yInner"> 
      
        <!--Circle: For a stroke width of 3-->
        <circle [attr.cx]="shape.wInner/2" [attr.cy]="shape.wInner/2" [attr.r]="shape.wInner/2 - 3/2"/>
        <line [attr.x1]="shape.wInner/2" [attr.y1]="shape.wInner - 3"
              [attr.x2]="shape.wInner/2" [attr.y2]="shape.hInner"/>
        <!--Sine-->      
        <path [attr.d]="shape.path1"/>
        <path [attr.d]="shape.path2"/>
      </svg>  
      <!--Load-->
      <svg *ngIf="shape.elementType=='load'"
      [attr.height]="shape.hInner" [attr.width]="shape.wInner"
      [attr.x]="shape.xInner" [attr.y]="shape.yInner"> 
      <path [attr.d]="shape.path1"/>
      </svg>
    </svg>

    <!-- selected ID -->
    <svg *ngIf="selectedShape" height="200" width="200">
      <text x="0" y="15">&nbsp;{{selectedShape.elementId}}</text>

        <!-- <foreignObject x="10" y="20" width="100%" height="100"> 
          
          <xhtml:button routerLink="/data-entry-component">
            <i class="material-icons" style="font-size:18px;color:black">
              mode_edit</i>
          </xhtml:button>

          <xhtml:button (click)="addElement('bus')">
            <i class="material-icons" style="font-size:18px;color:black">
              mode_delete_forever</i> 
          </xhtml:button>
        </foreignObject> -->
  

    </svg>
  </ng-container>

  
  <!-- <rect id="fill-1"
  [attr.x]="200" 
  [attr.y]="400" 
  [attr.width]="30"
  [attr.height]="15"
  [attr.rx]="6"
  (click)="addElement('bus')" /> 

  <svg>
    <a routerLink="/data-entry-component/{{selectedId}}">
  <rect
  [attr.x]="250" 
  [attr.y]="400" 
  [attr.width]="30"
  [attr.height]="15"
  [attr.rx]="6"/>
  </a>/>
  </svg>   -->

</svg>
<!-- <section>{{getCanvasSize()}}</section> -->

</div>

<!-- Selected Id -->
<!-- <section style="text-align:right;">
  <div  *ngIf="selectedId; else elseBlock">{{selectedId}}</div>
  <ng-template #elseBlock>no selection</ng-template>
</section> -->



<!-- Button area -->

<!-- <div class="buttonArea"> -->
<div class="footer">
  &nbsp;
  
  <button (click)="addElement('bus')">Bus</button>
  <button (click)="addElement('branch')">Branch</button>
  <button (click)="addElement('gen')">Gen</button>
  <button (click)="addElement('load')">Load</button>
  &nbsp;&nbsp;
  <button>Main</button>
  <button style="float: right;margin-right: 8px;" 
    [disabled]="!selectedShape" 
    routerLink="/data-entry-component">Data</button>

</div>

